import{W as f,r as j,j as e,d as v}from"./app-CHYGdead.js";import{L as I}from"./Layout-Wfi7iR6g.js";import{I as p}from"./inputtext.esm-H8qzUAnW.js";import{B as N}from"./button.esm-Hv8xCZ0W.js";import{I as x}from"./inputtextarea.esm-CLd9R0Jq.js";import{I as m}from"./InputError-Cw5M147p.js";import{B as k,Q as w}from"./ReactToastify-EWHmp7L1.js";import"./ripple.esm-CspZCiMg.js";import"./CSSTransition-ZZGb8p9d.js";function S({errors:i,materiales:s,personales:l,flash:o,permisos:u}){const{data:d,setData:t,post:g}=f({descripcion:"",cantidad:"",materialId:s.length!=0?s[0].id:"",personalId:l.length!=0?l[0].id:"",descripcionMaterial:s.length!=0?s[0].descripcion:"",cargo:l.length!=0?l[0].cargo:"",cantidadDisponible:s.length!=0?s[0].stock:"",disabledInput:!(s.length!=0&&s[0].stock!=0)});function b(a){a.preventDefault(),g(route("salidaMaterial.store"))}j.useEffect(()=>{(Object.keys(i).length>0||o.message!=null)&&h("Ocurrio un problema!")},[o]);const h=a=>k.error(a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0});return e.jsxs(I,{permisos:u,children:[e.jsx("div",{children:e.jsx(w,{})}),e.jsx("div",{className:"grid",children:e.jsx("div",{className:"col-12 md:col-12",children:e.jsxs("div",{className:"card",style:{width:"100%"},children:[e.jsx("h5",{children:"NUEVA SALIDA DE MATERIAL"}),e.jsxs("div",{className:"grid",children:[e.jsx("div",{className:"col-2 md:col-2"}),e.jsx("div",{className:"col-8 md:col-8",children:e.jsxs("form",{onSubmit:b,className:"p-fluid",children:[e.jsxs("div",{className:"-mx-3 md:flex mb-6",children:[e.jsxs("div",{className:"md:w-full px-3",children:[e.jsx("label",{className:"block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2",for:"grid-password",children:"CANTIDAD"}),e.jsx(p,{keyfilter:"int",id:"cantidad",name:"cantidad",value:d.cantidad,disabled:d.disabledInput,onChange:a=>{const c=a.target.value.trim(),r=c===""?"":parseInt(c);r<=d.cantidadDisponible?t("cantidad",r):console.log("La cantidad introducida supera la cantidad disponible")},required:!0}),e.jsxs("div",{className:"text-gray-400",children:["Cantida Disponible :",d.cantidadDisponible]}),i.cantidad&&e.jsx("div",{className:"text-red-500",children:i.cantidad})]}),e.jsxs("div",{className:"md:w-full px-3",children:[e.jsx("label",{className:"block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2",for:"grid-password",children:"MATERIAL"}),e.jsx("select",{id:"materialId",className:" block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3",value:d.materialId,onChange:a=>{t("materialId",a.target.value);const c=parseInt(a.target.value),r=s.find(n=>n.id===c);r&&t({descripcion:d.descripcion,cantidad:"",personalId:d.personalId,materialId:a.target.value,descripcionMaterial:r.descripcion,cantidadDisponible:r.stock,disabledInput:r.stock==0,cargo:d.cargo})},required:!0,children:s.map(a=>e.jsx("option",{value:a.id,children:a.nombre},a.id))}),e.jsx(m,{className:"text-red text-xs italic",message:i.materialId})]}),e.jsxs("div",{className:"md:w-full px-3",children:[e.jsx("label",{className:"block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2",for:"grid-password",children:"DESCRIPCION MATERIAL"}),e.jsx(x,{id:"descripcionMaterial",name:"descripcionMaterial",autoResize:!0,value:d.descripcionMaterial,onChange:a=>t("descripcionMaterial",a.target.value),rows:5,cols:30,disabled:!0}),i.descripcionMaterial&&e.jsx("div",{className:"text-red-500",children:i.descripcionMaterial})]})]}),e.jsx("div",{className:"-mx-3 md:flex mb-6",children:e.jsxs("div",{className:"md:w-full px-3",children:[e.jsx("label",{className:"block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2",for:"grid-password",children:"DESCRIPCION"}),e.jsx(x,{id:"descripcion",name:"descripcion",autoResize:!0,value:d.descripcion,onChange:a=>t("descripcion",a.target.value),rows:5,cols:30,required:!0}),i.descripcion&&e.jsx("div",{className:"text-red-500",children:i.descripcion})]})}),e.jsxs("div",{className:"-mx-3 md:flex mb-6",children:[e.jsxs("div",{className:"md:w-full px-3",children:[e.jsx("label",{className:"block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2",for:"grid-password",children:"PERSONAL"}),e.jsx("select",{id:"personalId",className:" block w-full bg-grey-lighter text-grey-darker border border-red rounded py-3 px-4 mb-3",value:d.personalId,onChange:a=>{t("personalId",a.target.value);const c=parseInt(a.target.value),r=l.find(n=>n.id===c);r&&t({descripcion:d.descripcion,cantidad:d.cantidad,personalId:a.target.value,materialId:d.materialId,descripcionMaterial:d.descripcionMaterial,cantidadDisponible:d.cantidadDisponible,disabledInput:d.disabledInput,cargo:r.cargo})},required:!0,children:l.map(a=>e.jsxs("option",{value:a.id,children:[a.grado,a.nombre," ",a.apellidos]},a.id))}),e.jsx(m,{className:"text-red text-xs italic",message:i.personalId})]}),e.jsxs("div",{className:"md:w-full px-3",children:[e.jsx("label",{className:"block uppercase tracking-wide text-grey-darker text-xs font-bold mb-2",for:"grid-password",children:"CARGO PERSONAL"}),e.jsx(p,{id:"cargo",name:"cargo",value:d.cargo,onChange:a=>{t("cargo",a.target.value)},disabled:!0}),i.cargo&&e.jsx("div",{className:"text-red-500",children:i.cargo})]})]}),e.jsx("div",{className:"p-field mb-4 flex justify-between",children:e.jsxs("div",{className:"flex",children:[e.jsx(N,{type:"submit",label:"Guardar",className:"p-button-sm mr-2",severity:"info",outlined:!0}),e.jsx(v,{className:"p-button p-button-sm p-button-danger",href:route("material.index"),style:{color:"white"},children:"Cancelar"})]})})]})}),e.jsx("div",{className:"col-2 md:col-2"})]})]})})})]})}export{S as default};
